@{
    ViewData["Title"] = "Menú del Restaurante";
}
@model Dictionary<string, List<Carta>>

<div class="container my-5">
    <h2 class="text-center display-4 fw-bold mb-4 text-primary">Menú del Restaurante</h2>

    @foreach (var categoria in Model.Keys)
    {
        <div class="categoria-container mb-5 p-4">
            <!-- Título de categoría con un fondo gris -->
            <h3 class="categoria-titulo text-dark text-uppercase text-center p-3">@categoria</h3>

            @if (Model[categoria].Count > 3)
            {
                <!-- Carrusel si hay más de 3 platos -->
                <div id="carousel-@categoria.Replace(" ", "-")" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-inner">
                        @for (var i = 0; i < Model[categoria].Count; i++)
                        {
                            var plato = Model[categoria][i];
                            <div class="carousel-item @(i == 0 ? "active" : "")">
                                <div class="col-lg-4 col-md-6 mx-auto">
                                    <div class="card border-0 shadow-sm h-100">
                                        <div class="position-relative text-center">
                                            <img src="~/images/platos/@plato.Imagen"
                                                 class="card-img-top rounded-top img-fluid plato-img"
                                                 alt="@plato.Nombre">
                                            <span class="precio-badge">€ @plato.Precio</span>
                                        </div>
                                        <div class="card-body text-center">
                                            <h5 class="card-title text-dark fw-bold">@plato.Nombre</h5>
                                            <p class="card-text text-muted">@plato.Descripcion</p>
                                            <button class="btn btn-primary btn-lg mt-2">
                                                <i class="fas fa-utensils"></i> Añadir al pedido
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                    <!-- Controles del Carrusel -->
                    <button class="carousel-control-prev" type="button" data-bs-target="#carousel-@categoria.Replace(" ", "-")" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carousel-@categoria.Replace(" ", "-")" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    </button>
                </div>
            }
            else
            {
                <!-- Si hay 3 o menos platos, los mostramos en tarjetas -->
                <div class="row g-4">
                    @foreach (var plato in Model[categoria])
                    {
                        <div class="col-lg-4 col-md-6">
                            <div class="card border-0 shadow-sm h-100">
                                <div class="position-relative text-center">
                                    <img src="~/images/platos/@plato.Imagen"
                                         class="card-img-top rounded-top img-fluid plato-img"
                                         alt="@plato.Nombre">
                                    <span class="precio-badge">€ @plato.Precio</span>
                                </div>
                                <div class="card-body text-center">
                                    <h5 class="card-title text-dark fw-bold">@plato.Nombre</h5>
                                    <p class="card-text text-muted">@plato.Descripcion</p>
                                    <button class="btn btn-primary btn-lg mt-2">
                                        <i class="fas fa-utensils"></i> Añadir al pedido
                                    </button>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            }
        </div>
    }
</div>
